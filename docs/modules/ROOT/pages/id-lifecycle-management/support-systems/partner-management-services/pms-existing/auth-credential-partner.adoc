== Auth Partner

=== Overview

Below is the workflow that includes the registration process for an Auth
or Credential partner and the steps that need to be followed for using
the partner portal.

* The partner self-registers through the portal.
* Partner selects the relevant Policy Group.
* Partner admin uploads the CA certificate.
* Partner admin or partner uploads the partner certificate.
* Partner admin or Partner maps the Partner Policy.
* Partner admin approves or rejects partner policy mapping.
* Partner logins after the approval and generates the API key for the
approved partner policy mapping using an unique label.

==== Self-registration

* The Auth/ Credential partner can register themselves on MOSIP PMS
portal by clicking *Register* on the landing page.
* They need to fill up a form with the details below:
** First and Last name
** Organization Name
** Partner type (Authentication Partner/ Credential Partner)
** Address, e-mail, phone number
** Username and password

image:../../../../.gitbook/assets/auth-partner-self-register.PNG[../../../../.gitbook/assets/auth-partner-self-register]

To view the details entered, click *Home* to see the dashboard.

image:../../../../.gitbook/assets/auth-partner-map-policy-page%20(1).PNG[../../../../.gitbook/assets/auth-partner-map-policy-page%20(1)]

==== Policy Group mapping

On successful registration, the partner can see their username displayed
on the top right corner.

[arabic]
. Partner selects the relevant Policy Group from *Map Policy Group*
dropdown.
. Clicks *Save*.

image:../../../../.gitbook/assets/auth-partner-dashboard.PNG[../../../../.gitbook/assets/auth-partner-dashboard]

==== Upload of Certificates

===== CA Certificate upload

The Partner admin needs to upload the CA certificate to enable the
partner for using the portal. To do so, the Partner admin:

[arabic]
. Clicks *Upload CA Certificate* option on the left navigation pane of
the partner portal.
. Selects the Partner Domain.
. Chooses the certificate to upload (only files with extensions as .cer
or .pem).
. Clicks *Upload*.

image:../../../../.gitbook/assets/ca-cert-data-upload.PNG[../../../../.gitbook/assets/ca-cert-data-upload]

image:../../../../_images/ca-cert-data-success.PNG[../../../../++_++images/ca-cert-data-success]

The uploaded certificates can be viewed by clicking on
`View Certificates-++>++ View`.

image:../../../../.gitbook/assets/auth-partner-view-cert.PNG[../../../../.gitbook/assets/auth-partner-view-cert]

===== Partner Certificate upload

Similarly, the Partner certificates can be added by the Partner admin/
partner.

image:../../../../.gitbook/assets/auth-partner-upload-cert-page1.PNG[../../../../.gitbook/assets/auth-partner-upload-cert-page1]

image:../../../../.gitbook/assets/auth-partner-upload-cert-page2.PNG[../../../../.gitbook/assets/auth-partner-upload-cert-page2]

image:../../../../.gitbook/assets/auth-partner-upload-cert-success.PNG[../../../../.gitbook/assets/auth-partner-upload-cert-success]

==== Mapping policy to policy group

Once the certificates are uploaded,

[arabic]
. Partner maps the policy to the Policy group by clicking on *Partner
Policy Mapping -++>++ {plus}Map Policy*.
. Partner enters the Partner Name.
. Selects the Auth Policy Name from the dropdown.
. Enters a value for the Request Details (unique value) and clicks
*Save*.

image:../../../../.gitbook/assets/auth-partner-policy-mapping-default-page.PNG[../../../../.gitbook/assets/auth-partner-policy-mapping-default-page]

image:../../../../.gitbook/assets/auth-partner-policy-mapping-data.PNG[../../../../.gitbook/assets/auth-partner-policy-mapping-data]

* Once this is done, you will see a message saying
`Policy mapping grequest submitted successfully`.
* Also, the status is displayed as "`In progress`" and this means that
the partner cannot generate the API key until the request is approved by
the Partner admin.

image:../../../../.gitbook/assets/auth-partner-policy-mapping-request-success.PNG[../../../../.gitbook/assets/auth-partner-policy-mapping-request-success]

image:../../../../.gitbook/assets/auth-partner-policy-mapping-page-view.PNG[../../../../.gitbook/assets/auth-partner-policy-mapping-page-view]

==== Approval/ Rejection of partner policy mapping

Once the Partner Policy Mapping request is raised by the partner, the
Partner admin has the privilege to approve/ reject the mapping. To do
so,

[arabic]
. Partner admin logs into the PMS portal and clicks on
`Partner Policy Mapping` in the left navigation pane.
. Selects the policy mapping that needs an approval.
. From the action menu against the policy mapping, selects *Manage
Policy*.
. Clicks *Approve*.

image:../../../../.gitbook/assets/partner-admin-policy-mappings-view-policy.PNG[../../../../.gitbook/assets/partner-admin-policy-mappings-view-policy]

image:../../../../.gitbook/assets/partner-admin-policy-mappings-manage-policy.PNG[../../../../.gitbook/assets/partner-admin-policy-mappings-manage-policy]

image:../../../../.gitbook/assets/partner-admin-policy-mappings-approve.PNG[../../../../.gitbook/assets/partner-admin-policy-mappings-approve]

Once the request is approved, the partner can view the status being
updated to `Approved` instead of `InProgress`.

image:../../../../.gitbook/assets/auth-partner-policy-mapping-data-approved.PNG[../../../../.gitbook/assets/auth-partner-policy-mapping-data-approved]

==== Generating the API Key

Partner logins after the Partner Policy Mapping is approved by the
Partner admin and generates the API key with an unique label. To do so,

[arabic]
. Partner clicks `Partner Policy Mapping` on the left navigation pane.
. From the actions menu, click *Generate API Key*.
. Partner enters a unique value for the `Label` field.
. Click *Generate*.

The API key is generated and can be used by the partner.

image:../../../../.gitbook/assets/auth-partner-generate-apikey-option.PNG[../../../../.gitbook/assets/auth-partner-generate-apikey-option]

image:../../../../.gitbook/assets/auth-partner-generate-apikey-page.PNG[../../../../.gitbook/assets/auth-partner-generate-apikey-page]

image:../../../../.gitbook/assets/auth-partner-genearted-apikeys-page.PNG[../../../../.gitbook/assets/auth-partner-genearted-apikeys-page]

image:../../../../.gitbook/assets/auth-partner-generate-apikey-success.PNG[../../../../.gitbook/assets/auth-partner-generate-apikey-success]

The partner can also deactivate a particular API Key by clicking on the
cross-mark (X) next to it. Please note, once deactivated, it cannot be
activated again. You may need to generate a new API key as per
requirement.
